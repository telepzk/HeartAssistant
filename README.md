# Описание моделей
Построены модели для следующих заболеваний:

* Артериальная гипертензия ('model_art.pcl')
* ОНМК ('model_omnk.pcl')
* Стенокардия, ИБС, инфаркт миокарда ('model_steno.pcl')
* Сердечная недостаточность ('model_serd_ned.pcl')
* Прочие заболевания сердца ('model_proch.pcl)

Модели используют библиотеку catboost. В тетрадках приведен пайплайн построения моделей, полученные метрики и значимость признаков. Например, значимость признаков для модели прогноза наличия заболевания Стенокардия, ИБС, инфаркт миокарда:

|                                        |     feat |
|:---------------------------------------|---------:|
| Длительность сердечной недостаточности | 8.83298  |
| Лекарство / давление                   | 5.36495  |
| Триглицериды                           | 4.42085  |
| Лекарство / холестерин                 | 4.39479  |
| Длительность артериальной гипертензии  | 1.82612  |
| 17. Известно ли о наличии… / b         | 1.71387  |
| 115. Вареники                          | 1.61892  |
| 17. Известно ли о наличии… / e         | 1.56579  |
| 10. Реклама газ. напитков / СМИ        | 1.24521  |
| 1. Курят / остановка                   | 1.17633  |
| 74. Кабачок                            | 1.09594  |
| Стресс из-за финанс.                   | 1.02269  |
| Рак: отец                              | 1.02248  |
| 182. Сливочное масло                   | 0.931192 |
| 21. Масло бутербр.                     | 0.901992 |
| Бета-каротин,мкг                       | 0.85067  |
| Сигарет в день                         | 0.792235 |
| Вино, регуляр                          | 0.775657 |
| 20. Замечания курящим подросткам       | 0.756259 |
| 112. Серый хлеб                        | 0.751374 |

При этом качество данной модели:

* Матрица ошибок:

| | Прогноз отсутстия болезни| Прогноз наличия болезни |
|-|-|-|
|Факт отсутсвия болезни| 288 | 2  |
|Факт наличия болезни| 18  | 22 |

* accuracy - 0.9375
* precision - 0.86
* recall - 0.4
* f1_score - 0.55


### Структура директории

```
.
|-- models                                - директория с сериализованными моделями
|   |-- model_art.pcl
|   |-- model_omnk.pcl
|   |-- model_proch.pcl
|   |-- model_serd_ned.pcl
|   `-- model_steno.pcl
|-- notebooks                             - директория с тетрадками
|   |-- data                              - директория с предобработанными данными
|   |   |-- categorical_features.txt
|   |   |-- data_dict.pcl
|   |   `-- full_data.csv
|   |-- tuning_art.ipynb
|   |-- tuning_onmk.ipynb
|   |-- tuning_proch.ipynb
|   |-- tuning_serd_ned.ipynb
|   `-- tuning_steno.ipynb
```

# Запуск приложения
### Запуск heart-prediction
Решение для инференса модели реализовано на языке Python  3.8.5 x64.
1. Открыть в консоли каталог `heart-prediction`
2. Создать виртуальное окружение Python `python -m venv venv` и активировать его `.\venv\scripts\activate`
3. Установить необходимые зависимости `pip install -r requirements.txt`
4. Запустить приложение `python app.py`


### Запуск HeartPrediction
Решение для инференса модели реализовано на языке .NET Core 3.1 + Angular 11. В качестве БД используется PostgreSQL
1. Открыть в консоли каталог `HeartAssistant\HeartAssistant.Web`
2. Установить необходимые зависимости `dotnet restore`
3. Сконфигурировать строку подключения к PostgreSQ: в файле `appsettings.json`
4. Запустить приложение `dotnet run` (первый запуск соберет необходимые модули npm и создаст БД. Необходимо время.)